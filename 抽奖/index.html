<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æŠ½å¥–</title>
    <style>
      body {
        background-color: #333;
      }
      .box {
        text-align: center;
      }
      .box #box {
        width: 500px;
        height: 500px;
      }
      .box button {
        margin-top: 20px;
        padding: 0.6em 2.5em;
        font-size: 1em;
        border-radius: 10px;
        border-color: rgba(0, 0, 0, 0.4);
        color: #fff;
        background: linear-gradient(#eee, #f50);
      }
    </style>
  </head>
  <body>
    <div class="box">
      <div id="box"></div>
      <div>
        <button id="btnStart">æŠ½å¥–</button>
      </div>
    </div>
    <script type="module">
      import Turntable from "./turntable.js"; //å¼•ç”¨æ¨¡å—
      window.onload = () => {
        const t = new Turntable({
          window,
          elemId: "box",
        });
        //TODO: æœ€å¤š7ä¸ª
        const resouce = [
          
          {
            image: "./imges/tc.jpg",
            title: "ç‰¹ç­‰å¥–ï¼šæ±¤è‡£ä¸€å“ä¸€æ ‹",
          },
          {
            image: "./imges/R-C.jpg",
            title: "ä¸€ç­‰å¥–ï¼šå…°åšåŸºå°¼R-C",
          },
          {
            image: "./imges/lv.avif",
            title: "äºŒç­‰å¥–ï¼šè·¯å¨åŒ…åŒ…10ä¸ª",
          },
          {
            image: "./imges/OIP-C.jpg",
            title: "ä¸‰ç­‰å¥–ï¼šiPhoneå…¨å®¶æ¡¶",
          },
          {
            image: "./imges/bx.jpg",
            title: "å››ç­‰å¥–ï¼šå››å¼€é—¨å†°ç®±",
          },
          {
            image: "./imges/OIP-C (1).jpg",
            title: "äº”ç­‰å¥–ï¼š100å¯¸æ¶²æ™¶ç”µè§†",
          },
          {
            image: "./imges/qian.webp",
            title: "å…­ç­‰å¥–ï¼šå€’æ¬ å°æä¸€ä¸‡å…ƒ",
          },
        ];
        //åŠ è½½å›¾ç‰‡èµ„æºå¯èƒ½æœ‰å»¶è¿Ÿï¼Œé€šè¿‡å¼‚æ­¥å¤„ç†
        Promise.all(
          resouce.map((item) => {
            return new Promise((resolve, reject) => {
              let img = new Image();
              img.onload = () => {
                item.image = img;
                resolve(item);
              };
              img.onerror = reject;
              img.src = item.image;
            });
          })
        ).then((res) => {
          t.draw({
            // mode:1,
            goods: res,
          });
        });
        //è®¾ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById("btnStart").onclick = () => {
          t.onStart({
            // index: 3,//æŠ½å¥–æ¦‚ç‡è‡ªå·±å†™ï¼Œä¼ å…¥é¢„å®šå¥–å“çš„index
            success: (res) => {
              // console.log('ok', res);
              const good = res.goods[res.index];
              if (good.title) {
                if (good.title.indexOf("å…ƒ") >= 0)
                  alert(`ğŸ™‚æ­å–œæ­å–œæ‚¨!æŠ½åˆ°å¥–å“${good.title}.`);
                else alert("ğŸ™†â€å¾ˆé—æ†¾!æœªä¸­å¥–.");
              } else {
                alert(`ğŸ™‚æ­å–œæ­å–œæ‚¨!æŠ½åˆ°å¥–å“${res.index + 1}.`);
              }
            },
          });
        };
      };
    </script>
  </body>
</html>
